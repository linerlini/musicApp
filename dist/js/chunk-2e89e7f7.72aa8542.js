(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e89e7f7"],{"2b27":function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"singer"},[r("singer-list",{ref:"list"}),r("transition",{attrs:{name:"singerDetail"}},[r("router-view")],1)],1)},n=[],s=r("c668"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"singer-list"},[r("base-list-view",{ref:"list",attrs:{listData:t.singerDataArr},on:{"list-click":t.listClickHandle}})],1)},o=[],c=(r("a630"),r("4ec9"),r("d3b7"),r("3ca3"),r("ddb0"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"list-view"},[r("scroll",{ref:"scroll",staticClass:"list-view-scroll",attrs:{probeType:3,isListenScroll:!0},on:{scroll:t.scrollHandle}},[r("ul",{ref:"list",staticClass:"list-view-content",on:{click:function(e){return t.emitListClick(e)}}},t._l(t.listData,(function(e,i){return r("li",{key:i,staticClass:"list-view-group"},[r("h2",{staticClass:"list-view-group-title"},[t._v(t._s(e[0]))]),r("ul",{staticClass:"list-view-group-content"},t._l(e[1],(function(e,i){return r("li",{key:i,staticClass:"list-view-group-item",attrs:{"data-id":e?e.singerId:0}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e?e.singerIcon:"./default.png",expression:"groupItem ? groupItem.singerIcon : './default.png'"}],staticClass:"list-view-group-item-icon"}),r("p",{staticClass:"list-view-group-item-name"},[t._v(" "+t._s(e?e.name:"正在加载")+" ")])])})),0)])})),0)]),r("ul",{staticClass:"shortcutList",on:{touchstart:function(e){return e.stopPropagation(),e.preventDefault(),t.touchstartHandle(e)},touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.touchmoveHandle(e)}}},t._l(t.shortcutList,(function(e,i){return r("li",{key:i,staticClass:"shortcutItem",class:{current:Number(t.currentIndex)===i},attrs:{"data-index":i}},[t._v(t._s(e))])})),0),r("div",{directives:[{name:"show",rawName:"v-show",value:t.fixedTitleShowed,expression:"fixedTitleShowed"}],ref:"fixedTitle",staticClass:"fixedTitle"},[r("h2",[t._v(t._s(t.currentTitle))])])],1)}),u=[],l=(r("d81d"),r("fb6a"),r("159b"),r("5d17")),f=r("5f5b"),h={components:{Scroll:l["a"]},props:{listData:{type:Array,required:!0}},data:function(){return{currentIndex:0,fixedTitleShowed:!1,diff:0}},methods:{refresh:function(){this.$refs.scroll.refresh()},touchstartHandle:function(t){var e=t.target.closest(".shortcutItem"),r=t.touches[0],i=this.$refs.list.children;this.$refs.scroll.scrollToElement(i[e.dataset.index]),this.currentIndex=e.dataset.index,this.shortcutItemStart.startItemY=e.offsetTop,this.shortcutItemStart.startY=r.pageY,this.shortcutItemStart.gap=e.offsetHeight},touchmoveHandle:function(t){var e=t.touches[0],r=e.pageY,i=r-this.shortcutItemStart.startY+this.shortcutItemStart.startItemY;i<0&&(i=0),this.currentIndex=parseInt(i/18,10);var n=this.$refs.list.children;this.currentIndex>=n.length&&(this.currentIndex=n.length-1),this.$refs.scroll.scrollToElement(n[this.currentIndex])},scrollHandle:function(t){var e=this;if(0!==this.listHeight.length){var r=-t.y;if(r<0)this.fixedTitleShowed=!1;else if(this.fixedTitleShowed=!0,r>this.listHeight[this.currentIndex]&&r<=this.listHeight[this.currentIndex+1]){var i=r-this.listHeight[this.currentIndex+1];i=i>=-30?i+30:0,i!==this.diff&&(this.$refs.fixedTitle.style.transform="translateY(-".concat(i,"px)"),this.diff=i)}else this.listHeight.some((function(t,i){return r>=t&&r<=e.listHeight[i+1]&&(e.currentIndex=i,!0)}))}},emitListClick:function(t){this.$emit("list-click",t)},_calculateHeight:Object(f["a"])((function(){var t=this.$refs.list.children,e=[];Array.from(t).forEach((function(t){e.push(t.offsetTop)})),e.push(e[e.length-1]+t[t.length-1].offsetHeight),this.listHeight=e}),100)},created:function(){this.shortcutList=this.listData.map((function(t){return t[0].slice(0,1)})),this.shortcutItemStart={},this.listHeight=[]},watch:{listData:function(){this._calculateHeight()}},computed:{currentTitle:function(){return this.listData[this.currentIndex][0]}},emits:["list-click"]},d=h,v=(r("dd6c"),r("2877")),p=Object(v["a"])(d,c,u,!1,null,"279d280d",null),g=p.exports,m=(r("b0c0"),r("96cf"),r("1da1")),x=r("e47b");function w(t){return b.apply(this,arguments)}function b(){return b=Object(m["a"])(regeneratorRuntime.mark((function t(e){var r,i,n,s,a,o,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.limit,i=void 0===r?10:r,n=e.type,s=void 0===n?1:n,a=e.area,o=void 0===a?-1:a,c=e.initial,t.prev=1,t.next=4,Object(x["a"])({url:"/artist/list",params:{limit:i,type:s,area:o,initial:c}});case 4:u=t.sent,u=u.artists.map((function(t){return{name:t.name,singerIcon:t.picUrl,singerId:t.id}})),t.next=11;break;case 8:return t.prev=8,t.t0=t["catch"](1),t.abrupt("return",Promise.reject(t.t0));case 11:return t.abrupt("return",u);case 12:case"end":return t.stop()}}),t,null,[[1,8]])}))),b.apply(this,arguments)}function y(){return I.apply(this,arguments)}function I(){return I=Object(m["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(x["a"])({url:"/top/artists",params:{limit:12}});case 3:e=t.sent,e=e.artists.map((function(t){return{name:t.name,singerIcon:t.picUrl,singerId:t.id}})),t.next=10;break;case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0));case 10:return t.abrupt("return",e);case 11:case"end":return t.stop()}}),t,null,[[0,7]])}))),I.apply(this,arguments)}var k={data:function(){var t=new Map,e=new Array(10);t.set("热门",e);for(var r=0;r<26;r+=1){var i=String.fromCharCode(65+r);t.set(i,e)}return{singerData:t,singerDataArr:Array.from(t)}},components:{BaseListView:g},created:function(){this._getHotSingerInfo();for(var t=0;t<26;t+=1){var e=String.fromCharCode(65+t);this._getSingerInfo({initial:e})}},methods:{refresh:function(){this.$refs.list.refresh()},listClickHandle:function(t){var e=t.target.closest(".list-view-group-item");if(e){var r=e.dataset.id,i=e.querySelector(".list-view-group-item-icon").dataset.src,n=e.querySelector(".list-view-group-item-name").innerText;this.$router.push({name:"singerDetail",params:{id:r},query:{src:i,name:n}})}},_getHotSingerInfo:function(){var t=this;y().then((function(e){t.singerData.set("热门",e),t.singerDataArr=Array.from(t.singerData)})).catch((function(t){console.log("热门歌手信息获取失败",t)}))},_getSingerInfo:function(t){var e=this;w(t).then((function(r){var i=t.initial.toUpperCase();e.singerData.set(i,r),e.singerDataArr=Array.from(e.singerData)})).catch((function(t){console.log("歌手信息获取失败",t)}))}}},S=k,D=(r("c6a8"),Object(v["a"])(S,a,o,!1,null,"1106ae2f",null)),C=D.exports,_={components:{SingerList:C},mixins:[s["a"]],data:function(){return{fullScreenWatch:null}},methods:{handlePlayList:function(){0===this.playList.length?this.$el.style.bottom="0px":this.$el.style.bottom="".concat(this.miniPlayerHeight,"px"),this.$refs.list.refresh()}}},H=_,E=(r("a2a2"),Object(v["a"])(H,i,n,!1,null,"1a73bbfc",null));e["default"]=E.exports},"4ec9":function(t,e,r){"use strict";var i=r("6d61"),n=r("6566");t.exports=i("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n)},"55c2":function(t,e,r){},"5f5b":function(t,e,r){"use strict";r("99af");function i(t,e){var r;return function(){for(var i=this,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];r&&(clearTimeout(r),r=null),r=setTimeout((function(){t.call.apply(t,[i].concat(s))}),e)}}e["a"]=i},6566:function(t,e,r){"use strict";var i=r("9bf2").f,n=r("7c73"),s=r("e2cc"),a=r("0366"),o=r("19aa"),c=r("2266"),u=r("7dd0"),l=r("2626"),f=r("83ab"),h=r("f183").fastKey,d=r("69f3"),v=d.set,p=d.getterFor;t.exports={getConstructor:function(t,e,r,u){var l=t((function(t,i){o(t,l,e),v(t,{type:e,index:n(null),first:void 0,last:void 0,size:0}),f||(t.size=0),void 0!=i&&c(i,t[u],{that:t,AS_ENTRIES:r})})),d=p(e),g=function(t,e,r){var i,n,s=d(t),a=m(t,e);return a?a.value=r:(s.last=a={index:n=h(e,!0),key:e,value:r,previous:i=s.last,next:void 0,removed:!1},s.first||(s.first=a),i&&(i.next=a),f?s.size++:t.size++,"F"!==n&&(s.index[n]=a)),t},m=function(t,e){var r,i=d(t),n=h(e);if("F"!==n)return i.index[n];for(r=i.first;r;r=r.next)if(r.key==e)return r};return s(l.prototype,{clear:function(){var t=this,e=d(t),r=e.index,i=e.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete r[i.index],i=i.next;e.first=e.last=void 0,f?e.size=0:t.size=0},delete:function(t){var e=this,r=d(e),i=m(e,t);if(i){var n=i.next,s=i.previous;delete r.index[i.index],i.removed=!0,s&&(s.next=n),n&&(n.previous=s),r.first==i&&(r.first=n),r.last==i&&(r.last=s),f?r.size--:e.size--}return!!i},forEach:function(t){var e,r=d(this),i=a(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:r.first){i(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!m(this,t)}}),s(l.prototype,r?{get:function(t){var e=m(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),f&&i(l.prototype,"size",{get:function(){return d(this).size}}),l},setStrong:function(t,e,r){var i=e+" Iterator",n=p(e),s=p(i);u(t,e,(function(t,e){v(this,{type:i,target:t,state:n(t),kind:e,last:void 0})}),(function(){var t=s(this),e=t.kind,r=t.last;while(r&&r.removed)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),l(e)}}},"6d61":function(t,e,r){"use strict";var i=r("23e7"),n=r("da84"),s=r("94ca"),a=r("6eeb"),o=r("f183"),c=r("2266"),u=r("19aa"),l=r("861d"),f=r("d039"),h=r("1c7e"),d=r("d44e"),v=r("7156");t.exports=function(t,e,r){var p=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),m=p?"set":"add",x=n[t],w=x&&x.prototype,b=x,y={},I=function(t){var e=w[t];a(w,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:function(t,r){return e.call(this,0===t?0:t,r),this})},k=s(t,"function"!=typeof x||!(g||w.forEach&&!f((function(){(new x).entries().next()}))));if(k)b=r.getConstructor(e,t,p,m),o.REQUIRED=!0;else if(s(t,!0)){var S=new b,D=S[m](g?{}:-0,1)!=S,C=f((function(){S.has(1)})),_=h((function(t){new x(t)})),H=!g&&f((function(){var t=new x,e=5;while(e--)t[m](e,e);return!t.has(-0)}));_||(b=e((function(e,r){u(e,b,t);var i=v(new x,e,b);return void 0!=r&&c(r,i[m],{that:i,AS_ENTRIES:p}),i})),b.prototype=w,w.constructor=b),(C||H)&&(I("delete"),I("has"),p&&I("get")),(H||D)&&I(m),g&&w.clear&&delete w.clear}return y[t]=b,i({global:!0,forced:b!=x},y),d(b,t),g||r.setStrong(b,t,p),b}},"97ad":function(t,e,r){},a2a2:function(t,e,r){"use strict";r("97ad")},bb2f:function(t,e,r){var i=r("d039");t.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c6a8:function(t,e,r){"use strict";r("fb9f")},dd6c:function(t,e,r){"use strict";r("55c2")},f183:function(t,e,r){var i=r("d012"),n=r("861d"),s=r("5135"),a=r("9bf2").f,o=r("90e3"),c=r("bb2f"),u=o("meta"),l=0,f=Object.isExtensible||function(){return!0},h=function(t){a(t,u,{value:{objectID:"O"+ ++l,weakData:{}}})},d=function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,u)){if(!f(t))return"F";if(!e)return"E";h(t)}return t[u].objectID},v=function(t,e){if(!s(t,u)){if(!f(t))return!0;if(!e)return!1;h(t)}return t[u].weakData},p=function(t){return c&&g.REQUIRED&&f(t)&&!s(t,u)&&h(t),t},g=t.exports={REQUIRED:!1,fastKey:d,getWeakData:v,onFreeze:p};i[u]=!0},fb9f:function(t,e,r){}}]);
//# sourceMappingURL=chunk-2e89e7f7.72aa8542.js.map