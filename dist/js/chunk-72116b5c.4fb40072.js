(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72116b5c"],{"0e05":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"wrapper",staticClass:"rank-wrapper"},[r("scroll",{ref:"scroll",staticClass:"scroll",attrs:{dataArr:Array.from(t.rankList),click:!0}},[r("ul",{staticClass:"rank-list",on:{click:function(e){return t.songListHandle(e)}}},t._l(t.rankList,(function(e,n){return r("li",{key:n,staticClass:"rank-item",attrs:{"data-id":e[1].id}},[r("div",{staticClass:"rank-icon",style:t.getSongListIcon(e[1])},[r("p",[t._v(t._s(t.getUpdateTime(e[1].updateTime))+"更新")])]),t.songArr.get(e[1].id)?r("div",{staticClass:"song-list"},[r("p",[t._v("1."+t._s(t.getSongNameAndSingerName(t.songArr.get(e[1].id).songList[0])))]),r("p",[t._v("2."+t._s(t.getSongNameAndSingerName(t.songArr.get(e[1].id).songList[1])))]),r("p",[t._v("3."+t._s(t.getSongNameAndSingerName(t.songArr.get(e[1].id).songList[2])))])]):t._e(),t.songArr.get(e[1].id)?t._e():r("div",{staticClass:"song-load"},[r("loading")],1)])})),0)]),r("transition",{attrs:{name:"rankDetail"}},[r("router-view")],1)],1)},i=[],a=(r("99af"),r("a15b"),r("b0c0"),r("4ec9"),r("d3b7"),r("3ca3"),r("159b"),r("ddb0"),r("2909")),s=r("5530"),o=r("c668"),u=(r("d81d"),r("96cf"),r("1da1")),c=r("e47b");function l(){return f.apply(this,arguments)}function f(){return f=Object(u["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(c["a"])({url:"/toplist"});case 3:return e=t.sent,r=e.list.map((function(t){return{name:t.name,id:t.id,icon:t.coverImgUrl,updateTime:t.updateTime}})),t.abrupt("return",r);case 8:return t.prev=8,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),f.apply(this,arguments)}var d=l,p=r("a4e6"),h=r("5d17"),m=r("764a"),v=r("2f62"),g=Object(v["a"])("rankDetailModule"),b=g.mapMutations,y={mixins:[o["a"]],components:{Scroll:h["a"],Loading:m["a"]},methods:Object(s["a"])({handlePlayList:function(){0===this.playList.length?this.$refs.wrapper.style.bottom="0px":this.$refs.wrapper.style.bottom="".concat(this.miniPlayerHeight,"px"),this.$refs.scroll.refresh()},getUpdateTime:function(t){var e=new Date(t),r=e.getMonth()+1,n=e.getDate();return"".concat(this._fill(r),"月").concat(this._fill(n),"日")},getSongListIcon:function(t){return{backgroundImage:"url(".concat(t.icon,")")}},getSongNameAndSingerName:function(t){var e=t.singerName.join("/");return"".concat(t.name,"-").concat(e)},songListHandle:function(t){var e=t.target.closest(".rank-item");if(e){var r=e.dataset.id,n=this.rankList.get(+r),i=n.name,a=n.icon,s=this.songArr.get(+r),o=s.songList,u=s.songIdList;this.setName(i),this.setIcon(a),this.setSongList(o),this.setSongIdList(u),this.$router.push({name:"rankDetail",params:{id:r}})}},_fill:function(t){return t>=10?t:"0".concat(t)}},b(["setSongList","setSongIdList","setName","setIcon"])),data:function(){return{rankList:new Map,songArr:new Map}},created:function(){var t=this;d().then((function(e){var r=new Map;e.forEach((function(t){r.set(t.id,t)})),t.rankList=r})).then((function(){t.rankList.forEach((function(e){Object(p["b"])(e.id).then((function(r){t.songArr=new Map(Object(a["a"])(t.songArr).concat([[e.id,r]]))}))}))})).catch((function(t){console.log("rank get failed: ",t)}))}},x=y,w=(r("67a4"),r("2877")),k=Object(w["a"])(x,n,i,!1,null,"f9306440",null);e["default"]=k.exports},2909:function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t){if(Array.isArray(t))return n(t)}r.d(e,"a",(function(){return u}));r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("d3b7"),r("3ca3"),r("ddb0");function a(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}r("fb6a"),r("b0c0"),r("25f0");function s(t,e){if(t){if("string"===typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return i(t)||a(t)||s(t)||o()}},"4ec9":function(t,e,r){"use strict";var n=r("6d61"),i=r("6566");t.exports=n("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},"623e":function(t,e,r){},6566:function(t,e,r){"use strict";var n=r("9bf2").f,i=r("7c73"),a=r("e2cc"),s=r("0366"),o=r("19aa"),u=r("2266"),c=r("7dd0"),l=r("2626"),f=r("83ab"),d=r("f183").fastKey,p=r("69f3"),h=p.set,m=p.getterFor;t.exports={getConstructor:function(t,e,r,c){var l=t((function(t,n){o(t,l,e),h(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),f||(t.size=0),void 0!=n&&u(n,t[c],{that:t,AS_ENTRIES:r})})),p=m(e),v=function(t,e,r){var n,i,a=p(t),s=g(t,e);return s?s.value=r:(a.last=s={index:i=d(e,!0),key:e,value:r,previous:n=a.last,next:void 0,removed:!1},a.first||(a.first=s),n&&(n.next=s),f?a.size++:t.size++,"F"!==i&&(a.index[i]=s)),t},g=function(t,e){var r,n=p(t),i=d(e);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==e)return r};return a(l.prototype,{clear:function(){var t=this,e=p(t),r=e.index,n=e.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete r[n.index],n=n.next;e.first=e.last=void 0,f?e.size=0:t.size=0},delete:function(t){var e=this,r=p(e),n=g(e,t);if(n){var i=n.next,a=n.previous;delete r.index[n.index],n.removed=!0,a&&(a.next=i),i&&(i.previous=a),r.first==n&&(r.first=i),r.last==n&&(r.last=a),f?r.size--:e.size--}return!!n},forEach:function(t){var e,r=p(this),n=s(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:r.first){n(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!g(this,t)}}),a(l.prototype,r?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return v(this,0===t?0:t,e)}}:{add:function(t){return v(this,t=0===t?0:t,t)}}),f&&n(l.prototype,"size",{get:function(){return p(this).size}}),l},setStrong:function(t,e,r){var n=e+" Iterator",i=m(e),a=m(n);c(t,e,(function(t,e){h(this,{type:n,target:t,state:i(t),kind:e,last:void 0})}),(function(){var t=a(this),e=t.kind,r=t.last;while(r&&r.removed)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),l(e)}}},"67a4":function(t,e,r){"use strict";r("623e")},"6d61":function(t,e,r){"use strict";var n=r("23e7"),i=r("da84"),a=r("94ca"),s=r("6eeb"),o=r("f183"),u=r("2266"),c=r("19aa"),l=r("861d"),f=r("d039"),d=r("1c7e"),p=r("d44e"),h=r("7156");t.exports=function(t,e,r){var m=-1!==t.indexOf("Map"),v=-1!==t.indexOf("Weak"),g=m?"set":"add",b=i[t],y=b&&b.prototype,x=b,w={},k=function(t){var e=y[t];s(y,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(v&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!l(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!l(t))&&e.call(this,0===t?0:t)}:function(t,r){return e.call(this,0===t?0:t,r),this})},j=a(t,"function"!=typeof b||!(v||y.forEach&&!f((function(){(new b).entries().next()}))));if(j)x=r.getConstructor(e,t,m,g),o.REQUIRED=!0;else if(a(t,!0)){var I=new x,O=I[g](v?{}:-0,1)!=I,S=f((function(){I.has(1)})),L=d((function(t){new b(t)})),A=!v&&f((function(){var t=new b,e=5;while(e--)t[g](e,e);return!t.has(-0)}));L||(x=e((function(e,r){c(e,x,t);var n=h(new b,e,x);return void 0!=r&&u(r,n[g],{that:n,AS_ENTRIES:m}),n})),x.prototype=y,y.constructor=x),(S||A)&&(k("delete"),k("has"),m&&k("get")),(A||O)&&k(g),v&&y.clear&&delete y.clear}return w[t]=x,n({global:!0,forced:x!=b},w),p(x,t),v||r.setStrong(x,t,m),x}},a4e6:function(t,e,r){"use strict";r.d(e,"c",(function(){return o})),r.d(e,"b",(function(){return c})),r.d(e,"d",(function(){return f})),r.d(e,"a",(function(){return s}));r("d81d"),r("b0c0"),r("d3b7"),r("96cf");var n=r("1da1"),i=r("e47b"),a=r("fc1f");function s(t){var e=0;return e=t.privilege?t.privilege.maxbr:t.h?t.h.br:t.m?t.m.br:t.l.br,{id:t.id,albumId:t.al.id,albumName:t.al.name,singerName:t.ar.map((function(t){return t.name})),name:t.name,maxBr:e}}function o(t){return u.apply(this,arguments)}function u(){return u=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i["a"])({url:"/artist/songs",params:{order:"hot",offset:e.offset||0,limit:e.limit||30,id:e.id}});case 3:return r=t.sent,n=r.more,o=r.songs.map((function(t){return new a["a"](s(t))})),t.abrupt("return",{songList:o,more:n});case 9:return t.prev=9,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),u.apply(this,arguments)}function c(t){return l.apply(this,arguments)}function l(){return l=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i["a"])({url:"/playlist/detail",params:{id:e}});case 3:return r=t.sent,t.abrupt("return",{songList:r.playlist.tracks.map((function(t){return new a["a"](s(t))})),songIdList:r.playlist.trackIds.map((function(t){return t.id}))});case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),l.apply(this,arguments)}function f(t){return d.apply(this,arguments)}function d(){return d=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i["a"])({url:"/song/detail/",params:{ids:e}});case 3:return r=t.sent,n=r.songs.map((function(t,e){var n=t;return n.privilege=r.privileges[e],s(n)})),t.abrupt("return",n);case 8:return t.prev=8,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),d.apply(this,arguments)}},bb2f:function(t,e,r){var n=r("d039");t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},f183:function(t,e,r){var n=r("d012"),i=r("861d"),a=r("5135"),s=r("9bf2").f,o=r("90e3"),u=r("bb2f"),c=o("meta"),l=0,f=Object.isExtensible||function(){return!0},d=function(t){s(t,c,{value:{objectID:"O"+ ++l,weakData:{}}})},p=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,c)){if(!f(t))return"F";if(!e)return"E";d(t)}return t[c].objectID},h=function(t,e){if(!a(t,c)){if(!f(t))return!0;if(!e)return!1;d(t)}return t[c].weakData},m=function(t){return u&&v.REQUIRED&&f(t)&&!a(t,c)&&d(t),t},v=t.exports={REQUIRED:!1,fastKey:p,getWeakData:h,onFreeze:m};n[c]=!0},fc1f:function(t,e,r){"use strict";r("fb6a"),r("b0c0"),r("d3b7"),r("96cf");var n=r("1da1"),i=r("d4ec"),a=r("bee2"),s=r("e47b");function o(t,e,r){return u.apply(this,arguments)}function u(){return u=Object(n["a"])(regeneratorRuntime.mark((function t(e,r,n){var i,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["a"])({url:"/song/url",params:{id:e,br:r}});case 3:return i=t.sent.data[0].url,t.next=6,Object(s["a"])({url:"/lyric",params:{id:e}});case 6:return a=t.sent.lrc.lyric,t.next=9,Object(s["a"])({url:"/album",params:{id:n}});case 9:return o=t.sent.album.picUrl,t.abrupt("return",{url:i,lyric:a,picUrl:o});case 13:return t.prev=13,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,13]])}))),u.apply(this,arguments)}var c=o,l=function(){function t(e){var r=e.id,n=e.albumId,a=e.albumName,s=e.singerName,o=e.name,u=e.maxBr;Object(i["a"])(this,t),this.id=r,this.albumId=n,this.albumName=a,this.singerName=s,this.name=o,this.enable=!1,this.url="",this.maxBr=u,this.lyric="",this.icon="",this.songTime=0,this.loved=!1}return Object(a["a"])(t,[{key:"getPlayInfo",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c(this.id,this.maxBr,this.albumId);case 3:return e=t.sent,this.url=e.url,this.lyric=e.lyric,this.icon=e.picUrl,this._getSongTime(),this.enable=!0,t.abrupt("return",Promise.resolve());case 12:return t.prev=12,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0));case 15:case"end":return t.stop()}}),t,this,[[0,12]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getSongTime",value:function(){var t=this.lyric.lastIndexOf("]"),e=this.lyric.lastIndexOf("[")+1,r=this.lyric.slice(e,t),n=parseInt(r.substr(0,2),10),i=parseInt(r.substr(3,2),10),a=parseInt(r.substr(6,3),10),s=60*n*1e3+1e3*i+a;this.songTime=s,this.minutes=n,this.seconds=i,this.milliseconds=a}}]),t}();e["a"]=l}}]);
//# sourceMappingURL=chunk-72116b5c.4fb40072.js.map