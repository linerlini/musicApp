(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5dac84f7"],{"13d5":function(t,e,n){"use strict";var r=n("23e7"),s=n("d58f").left,a=n("a640"),i=n("2d00"),c=n("605d"),o=a("reduce"),l=!c&&i>79&&i<83;r({target:"Array",proto:!0,forced:!o||l},{reduce:function(t){return s(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"2abe":function(t,e,n){},6034:function(t,e,n){"use strict";n("c60d")},"91ec":function(t,e,n){"use strict";n("2abe")},a4e6:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return p})),n.d(e,"a",(function(){return i}));n("d81d"),n("b0c0"),n("d3b7"),n("96cf");var r=n("1da1"),s=n("e47b"),a=n("fc1f");function i(t){var e=0;return e=t.privilege?t.privilege.maxbr:t.h?t.h.br:t.m?t.m.br:t.l.br,{id:t.id,albumId:t.al.id,albumName:t.al.name,singerName:t.ar.map((function(t){return t.name})),name:t.name,maxBr:e}}function c(t){return o.apply(this,arguments)}function o(){return o=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["a"])({url:"/artist/songs",params:{order:"hot",offset:e.offset||0,limit:e.limit||30,id:e.id}});case 3:return n=t.sent,r=n.more,c=n.songs.map((function(t){return new a["a"](i(t))})),t.abrupt("return",{songList:c,more:r});case 9:return t.prev=9,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),o.apply(this,arguments)}function l(t){return u.apply(this,arguments)}function u(){return u=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["a"])({url:"/playlist/detail",params:{id:e}});case 3:return n=t.sent,t.abrupt("return",{songList:n.playlist.tracks.map((function(t){return new a["a"](i(t))})),songIdList:n.playlist.trackIds.map((function(t){return t.id}))});case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),u.apply(this,arguments)}function p(t){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["a"])({url:"/song/detail/",params:{ids:e}});case 3:return n=t.sent,r=n.songs.map((function(t,e){var r=t;return r.privilege=n.privileges[e],i(r)})),t.abrupt("return",r);case 8:return t.prev=8,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),f.apply(this,arguments)}},c60d:function(t,e,n){},d0cc:function(t,e,n){},d58f:function(t,e,n){var r=n("1c0b"),s=n("7b0b"),a=n("44ad"),i=n("50c4"),c=function(t){return function(e,n,c,o){r(n);var l=s(e),u=a(l),p=i(l.length),f=t?p-1:0,h=t?-1:1;if(c<2)while(1){if(f in u){o=u[f],f+=h;break}if(f+=h,t?f<0:p<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:p>f;f+=h)f in u&&(o=n(o,u[f],f,l));return o}};t.exports={left:c(!1),right:c(!0)}},e076:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"list",staticClass:"music-list"},[n("base-nav-bar",{ref:"navBar",staticClass:"nav-bar",scopedSlots:t._u([{key:"nav-left",fn:function(){return[n("div",{staticClass:"back",on:{click:function(e){return t.$router.back()}}},[n("i",{staticClass:"icon-back"})])]},proxy:!0},{key:"nav-center",fn:function(){return[n("h1",{staticClass:"title"},[t._v(t._s(t.name))])]},proxy:!0}])}),n("div",{ref:"pageTop",staticClass:"page-top"},[n("div",{staticClass:"filter"})]),n("div",{ref:"pageBottom",staticClass:"page-bottom"},[n("scroll",{ref:"scroll",staticClass:"scroll",attrs:{dataArr:t.songLists,probeType:3,isListenScroll:!0,click:!0,pullUpLoad:!0},on:{scroll:t.scrollHandle,pullingUp:t.pullingUpHandle}},[n("song-list",{attrs:{"song-list":t.songLists,rank:t.rank},on:{"song-click":t.songClickHandle}})],1),n("div",{ref:"bg",staticClass:"song-list-bg"}),n("loading",{directives:[{name:"show",rawName:"v-show",value:!t.songLists.length,expression:"!songLists.length"}],staticClass:"loading"})],1),n("song-list-player-button",{staticClass:"plyBtn",attrs:{songList:t.songLists},on:{"play-all":t.playAll}})],1)},s=[],a=(n("b0c0"),n("5530")),i=n("97eb"),c=n("5d17"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"song-list",on:{click:function(e){return t.$emit("song-click",e)}}},t._l(t.songList,(function(e,r){return n("li",{key:r,staticClass:"song-list-item",attrs:{"data-index":r}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.rank,expression:"rank"}],staticClass:"rank",class:t.getRankClass(r)},[n("p",[t._v(t._s(t.getRankContent(r)))])]),n("div",{staticClass:"content"},[n("h2",{staticClass:"name"},[t._v(t._s(e.name))]),n("p",{staticClass:"desc"},[t._v(t._s(t.getDesc(e)))])]),n("div",{staticClass:"buttons"},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-bofang"}})]),n("svg",{staticClass:"icon more",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-gengduomore10"}})])])])})),0)},l=[],u=(n("99af"),n("13d5"),{props:{songList:{type:Array,required:!0},rank:{type:Boolean,default:!1}},methods:{getDesc:function(t){var e=t.singerName.reduce((function(t,e){return"".concat(t,"/").concat(e)}));return"".concat(e,"·").concat(t.albumName)},getRankClass:function(t){return t<3?"icon icon".concat(t):"text"},getRankContent:function(t){return t<3?"":t+1}}}),p=u,f=(n("91ec"),n("2877")),h=Object(f["a"])(p,o,l,!1,null,"46e72940",null),g=h.exports,d=n("764a"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"player-wrapper",on:{click:function(e){return e.stopPropagation(),t.$emit("play-all")}}},[n("i",{staticClass:"icon-play"}),n("span",[t._v("播放全部")])])},b=[],v={props:{songList:{type:Array,default:function(){return[]}}},emits:["play-all"]},y=v,x=(n("6034"),Object(f["a"])(y,m,b,!1,null,"c0f2c31e",null)),k=x.exports,w=n("2f62"),C=n("c668"),T=Object(w["a"])("songModule"),L=T.mapActions,$=10,_=1,j={components:{BaseNavBar:i["a"],Scroll:c["a"],SongList:g,Loading:d["a"],SongListPlayerButton:k},props:{songLists:{type:Array,default:function(){return[]}},name:{type:String,default:"暂无"},icon:{type:String,default:""}},data:function(){return{maxTranslateDistance:0,offset:0}},mixins:[C["a"]],mounted:function(){this.topHeight=this.$refs.pageTop.offsetHeight,this.minTopHeight=this.$refs.navBar.$el.offsetHeight,this.$refs.pageBottom.style.top="".concat(this.topHeight,"px"),this.$refs.pageTop.style.backgroundImage="url(".concat(this.icon,")"),this.maxTranslateDistance=this.topHeight-this.minTopHeight},methods:Object(a["a"])({scrollHandle:function(t){var e=t.y;if(e<0){var n=Math.min(this.maxTranslateDistance,-e);this.$refs.bg.style.transform="translateY(-".concat(n,"px)"),n===this.maxTranslateDistance?this._changeTopHeight():this._changeTopHeight(!0)}else this._expandTop(e)},pullingUpHandle:function(){this.$emit("pullingUp")},songClickHandle:function(t){var e=t.target.closest(".more");if(!e&&(e=t.target.closest(".song-list-item"),e)){var n=e.dataset.index;this.changeCurrentSong({songList:[this.songLists[n]]})}},finishPullUp:function(){this.$refs.scroll.finishPullUp()},playAll:function(){this.changeSongList(this.songLists)},handlePlayList:function(){0===this.playList.length?this.$refs.list.style.bottom="0px":this.$refs.list.style.bottom="".concat(this.miniPlayerHeight,"px")},_changeTopHeight:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t)return this.$refs.pageTop.style.paddingTop="70%",void(this.$refs.pageTop.style.zIndex=_);this.$refs.pageTop.style.paddingTop="".concat(this.minTopHeight,"px"),this.$refs.pageTop.style.zIndex=$},_expandTop:function(t){this.$refs.pageTop.style.zIndex=$;var e=Math.abs(t/this.topHeight),n=1+e;this.$refs.pageTop.style.transform="scale(".concat(n,")"),1===n&&(this.$refs.pageTop.style.zIndex=_)}},L(["changeCurrentSong","changeSongList"])),computed:{rank:function(){return"rankDetail"===this.$route.name}},watch:{fullScreen:function(t,e){if(t!==e&&!t){var n=this.playList.length?this.miniPlayerHeight:0;this.$refs.pageBottom.style.bottom="".concat(n,"px")}}},emits:["pullingUp"]},H=j,O=(n("ecdd"),Object(f["a"])(H,r,s,!1,null,"87e49be4",null));e["a"]=O.exports},ecdd:function(t,e,n){"use strict";n("d0cc")},fc1f:function(t,e,n){"use strict";n("fb6a"),n("b0c0"),n("d3b7"),n("96cf");var r=n("1da1"),s=n("d4ec"),a=n("bee2"),i=n("e47b");function c(t,e,n){return o.apply(this,arguments)}function o(){return o=Object(r["a"])(regeneratorRuntime.mark((function t(e,n,r){var s,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i["a"])({url:"/song/url",params:{id:e,br:n}});case 3:return s=t.sent.data[0].url,t.next=6,Object(i["a"])({url:"/lyric",params:{id:e}});case 6:return a=t.sent.lrc.lyric,t.next=9,Object(i["a"])({url:"/album",params:{id:r}});case 9:return c=t.sent.album.picUrl,t.abrupt("return",{url:s,lyric:a,picUrl:c});case 13:return t.prev=13,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,13]])}))),o.apply(this,arguments)}var l=c,u=function(){function t(e){var n=e.id,r=e.albumId,a=e.albumName,i=e.singerName,c=e.name,o=e.maxBr;Object(s["a"])(this,t),this.id=n,this.albumId=r,this.albumName=a,this.singerName=i,this.name=c,this.enable=!1,this.url="",this.maxBr=o,this.lyric="",this.icon="",this.songTime=0,this.loved=!1}return Object(a["a"])(t,[{key:"getPlayInfo",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l(this.id,this.maxBr,this.albumId);case 3:return e=t.sent,this.url=e.url,this.lyric=e.lyric,this.icon=e.picUrl,this._getSongTime(),this.enable=!0,t.abrupt("return",Promise.resolve());case 12:return t.prev=12,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0));case 15:case"end":return t.stop()}}),t,this,[[0,12]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getSongTime",value:function(){var t=this.lyric.lastIndexOf("]"),e=this.lyric.lastIndexOf("[")+1,n=this.lyric.slice(e,t),r=parseInt(n.substr(0,2),10),s=parseInt(n.substr(3,2),10),a=parseInt(n.substr(6,3),10),i=60*r*1e3+1e3*s+a;this.songTime=i,this.minutes=r,this.seconds=s,this.milliseconds=a}}]),t}();e["a"]=u}}]);
//# sourceMappingURL=chunk-5dac84f7.18f5f5fc.js.map